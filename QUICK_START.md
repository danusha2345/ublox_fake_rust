# Инструкция по работе с платой

## Подключение

```
┌─────────────────────────────────────┐
│          RP2350 плата               │
├─────────────────────────────────────┤
│  GPIO0 (TX) ────► К дрону (RX)      │
│  GPIO1 (RX) ◄──── От дрона (TX)     │
│  GPIO5 (RX) ◄──── От GNSS (TX)      │  ← только для Passthrough
│  GND ────────────── GND             │
└─────────────────────────────────────┘
```

**Baudrate**: 921600 бод (8N1)

## Режимы работы

| Режим | LED | Описание |
|-------|-----|----------|
| **Emulation** | Зелёный | Генерация фейковых GNSS данных |
| **Emulation** (>20 сек) | Жёлтый | Спутники стали "невалидными" |
| **Passthrough** | Синий | Прозрачная передача от внешнего GNSS |

LED мигает с частотой 1 Гц (500ms вкл / 500ms выкл).

## Переключение режимов

**Нажать кнопку** — режим переключается циклически:
```
Emulation → Passthrough → Emulation → ...
```

Режим сохраняется во flash и восстанавливается после перезагрузки.

## Поведение в режиме Emulation

```
Включение платы ───────────────► LED зелёный (мигает)
     │
     ▼
Ожидание команды от дрона
     │
     ▼ (первая UBX команда)
     │
Задержка 400-700ms
     │
     ▼
NAV данные начинают передаваться
(3D fix, 18 спутников)
     │
     ▼ (+20 секунд)
     │
Спутники невалидны ────────────► LED жёлтый
(fix_type=0, num_sv=1)
```

## Сброс таймера 20 секунд

Переключить режим кнопкой: **Passthrough → Emulation**
